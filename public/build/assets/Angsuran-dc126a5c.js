import{r as u,j as l,a,F as y,n as A,g as T}from"./app-b3afb448.js";import{I as w}from"./InputLabel-6bf1377d.js";import{L as F}from"./Loading-e9759365.js";import{P as $}from"./PrimaryButton-724723da.js";import{S as v}from"./SelectList-9fc3e3ff.js";import{T as L}from"./TextInput-f72ced76.js";import{A as C}from"./AuthenticatedLayout-e28223d0.js";import{d as o}from"./dayjs.min-1c513307.js";import{N as c}from"./react-number-format.es-092d3933.js";import I from"./ModalAngsuran-ca7ec303.js";import"./transition-ec730b13.js";import"./index.esm-03938fb0.js";import"./iconBase-6f0f97c4.js";import"./index.esm-b389823b.js";import"./Modal-fe9b553f.js";import"./index.esm-ba3fa5c9.js";import"./InputError-233f4281.js";import"./Checkbox-9e70aecd.js";const ea=({...i})=>{console.log(i.pinjaman);const[b,g]=u.useState(!1),j=e=>{g(!1)},[M,f]=u.useState(!1),[h,R]=u.useState({search:"",hari:"",kelompok:"",...i.dataFilters});u.useState({show:!1,textAlert:null,typeAlert:null});const _=[{id:1,display:"senin",value:"senin"},{id:2,display:"selasa",value:"selasa"},{id:3,display:"rabu",value:"rabu"},{id:4,display:"kamis",value:"kamis"},{id:5,display:"jumat",value:"jumat"},{id:6,display:"sabtu",value:"sabtu"},{id:7,display:"minggu",value:"minggu"}],S=i.kelompok.sort((e,r)=>e.area-r.area).map(e=>({id:e.id,value:e.area,display:e.area})),N=e=>{const r={...h,[e.target.name]:e.target.value};T.get(route("unit.pinjaman.angsuran.index"),{data:r},{onBefore:()=>f(!0),onFinish:()=>f(!1)})},k=e=>{let r=null;return e.map((m,n)=>{const p=new Date(m).getMonth()+1;let d=null;return r==null||r==p?d=a("th",{className:"w-16 text-center px-6 py-3",children:o(m).format("DD/MM")},`x${n}`):d=l(y,{children:[a("th",{className:"w-16 text-center px-6 py-3",children:"TTL Angsuran"},`xa${n}`),a("th",{className:"w-16 text-center px-6 py-3",children:"Saldo"},`xaa${n}`),a("th",{className:"w-16 text-center px-6 py-3",children:o(m).format("DD/MM")},`x${n}`)]}),r=p,d})},D=(e,r)=>{let m=null;return e.map((n,p)=>{const d=new Date(n).getMonth()+1;let x=null;return m==null||m==d?x=a("td",{className:`text-center whitespace-nowrap text-sm px-6 py-3 ${r.angsuran.filter(t=>t.pembayaran_date==n).map(t=>t.danatitipan).join(", ")=="true"?"text-red-500":""}`,tanggal_id:o(n).format("DD/MM"),children:(()=>{if(r.angsuran.some(t=>t.pembayaran_date===n)){const t=r.angsuran.filter(s=>s.pembayaran_date==n).map(s=>s.jumlah).join(", ");return a(c,{value:t,displayType:"text",thousandSeparator:",",prefix:"Rp. "})}})()},`x2${p}`):x=l(y,{children:[a("td",{className:"text-center whitespace-nowrap text-sm px-6 py-3 bg-yellow-50",children:(()=>{if(r.angsuran.some(t=>t.pembayaran_date===n)){const t=r.angsuran.filter(s=>s.pembayaran_date==n).map(s=>parseInt(s.total_angsuran-s.jumlah)).join(", ");return a(c,{value:t,displayType:"text",thousandSeparator:",",prefix:"Rp. "})}})()},`xx1${p}`),a("td",{className:"text-center whitespace-nowrap text-sm px-6 py-3 bg-yellow-50",children:(()=>{if(r.angsuran.some(t=>t.pembayaran_date===n)){const t=r.angsuran.filter(s=>s.pembayaran_date==n).map(s=>parseInt(s.saldo_terakhir+s.jumlah)).join(", ");return a(c,{value:t,displayType:"text",thousandSeparator:",",prefix:"Rp. "})}})()},`xx2${p}`),a("td",{className:`text-center whitespace-nowrap text-sm px-6 py-3 ${r.angsuran.filter(t=>t.pembayaran_date==n).map(t=>t.danatitipan).join(", ")=="true"?"text-red-500":""}`,tanggal_id:o(n).format("DD/MM"),children:(()=>{if(r.angsuran.some(t=>t.pembayaran_date===n)){const t=r.angsuran.filter(s=>s.pembayaran_date==n).map(s=>s.jumlah).join(", ");return a(c,{value:t,displayType:"text",thousandSeparator:",",prefix:"Rp. "})}})()},`x2${p}`)]}),m=d,x})};return l(C,{auth:i.auth,errors:i.errors,header:a(y,{children:a("h2",{className:"font-semibold text-xl text-main-800 leading-tight",children:"Data Storting"})}),children:[a(A,{title:"Data Storting"}),a(F,{show:M}),a(I,{data:b,onClose:j,mantri:i.mantri}),a("div",{className:"py-3",children:a("div",{className:"mx-auto sm:px-6 lg:px-8",children:a("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:l("div",{className:"border p-6 text-main-800",children:[l("div",{className:"flex justify-between w-full items-center mb-6",children:[l("div",{className:"flex gap-3 items-center",children:[a(w,{value:"Kelompok :",className:"font-semibold"}),a(v,{value:h.kelompok??"",name:"kelompok",onChange:N,nullValue:!0,options:S})]}),l("div",{className:"flex gap-3 items-center ml-3",children:[a(w,{value:"Hari :",className:"font-semibold"}),a(v,{value:h.hari??"",name:"hari",onChange:N,nullValue:!0,options:_})]}),a("div",{className:"ml-auto",children:l("form",{className:"flex gap-3",children:[a(L,{placeholder:"Cari Nama",id:"searchFill"}),a($,{type:"submit",title:"search"})]})})]}),a("div",{className:"relative overflow-x-auto shadow-md sm:rounded-lg text-main-800 mb-6 whitespace-pre-wrap",children:l("table",{className:"w-full text-sm text-left text-main-500 dark:text-main-400",children:[a("thead",{className:"text-xs text-main-700 uppercase bg-main-100 dark:bg-gray-700 dark:text-main-400",children:l("tr",{children:[a("th",{className:"px-6 py-3",children:"Nomor"}),a("th",{className:"px-6 py-3 whitespace-nowrap",children:"Tanggal Drop"}),a("th",{className:"px-6 py-3 whitespace-nowrap",children:"Nama Nasabah"}),a("th",{className:"px-6 py-3",children:"Alamat"}),a("th",{className:"px-6 py-3",children:"Kelompok"}),a("th",{className:"px-6 py-3",children:"Hari"}),a("th",{className:"px-6 py-3 whitespace-nowrap",children:"Pinjaman Ke"}),a("th",{className:"px-6 py-3 whitespace-nowrap",children:"Jml Angsuran"}),a("th",{className:"px-6 py-3 whitespace-nowrap",children:"Besar Pinjaman"}),k(i.display_tanggal)]})}),a("tbody",{children:i.pinjaman.map((e,r)=>l("tr",{children:[a("td",{className:"px-6 py-3",children:r+1}),a("td",{className:"px-6 py-3",children:o(e.tanggal_drop).format("DD-MM-YYYY")}),a("td",{className:"px-6 py-3 hover:bg-gray-100 hover:cursor-pointer text-blue-500",onClick:m=>g({show:!0,dataArray:e}),children:e.customer.nama}),a("td",{className:"px-6 py-3",children:e.customer.alamat}),a("td",{className:"px-6 py-3",children:e.kelompok}),a("td",{className:"px-6 py-3",children:e.hari}),a("td",{className:"px-6 py-3",children:"1"}),a("td",{className:"px-6 py-3",children:e.angsuran.length}),a("td",{className:"px-6 py-3 whitespace-nowrap",children:a(c,{value:e.pinjaman,displayType:"text",thousandSeparator:",",prefix:"Rp. "})}),D(i.display_tanggal,e)]},r))})]})})]})})})})]})};export{ea as default};

import{r as u,j as n,a,F as g,n as C,g as L}from"./app-6e80265d.js";import{I as M}from"./InputLabel-cd856161.js";import{L as P}from"./Loading-7978b7d8.js";import{P as R}from"./PrimaryButton-4e18fc5b.js";import{S as j}from"./SelectList-e9f73704.js";import{T as B}from"./TextInput-420b4604.js";import{A as H}from"./AuthenticatedLayout-66ad427d.js";import{d as m}from"./dayjs.min-8d0bae3b.js";import{N as c}from"./react-number-format.es-c408b04a.js";import Y from"./ModalAngsuran-5e70e80e.js";import{a as K}from"./index.esm-00a1b8af.js";import E from"./ModalNotes-405adf12.js";import"./transition-52595909.js";import"./SweetAlert-390db087.js";import"./iconBase-9ac44975.js";import"./index.esm-dbd368ac.js";import"./Modal-89458efc.js";import"./index.esm-67e102c1.js";import"./InputError-b8f8921a.js";import"./Checkbox-7bf53c91.js";const pa=({...o})=>{const[A,f]=u.useState(!1),S=e=>{f(!1)},[k,w]=u.useState(!1),D=e=>{w(!1)},[_,N]=u.useState(!1),[x,O]=u.useState({search:"",hari:"",kelompok:"",...o.dataFilters}),T=[{id:1,display:"senin",value:"senin"},{id:2,display:"selasa",value:"selasa"},{id:3,display:"rabu",value:"rabu"},{id:4,display:"kamis",value:"kamis"},{id:5,display:"jumat",value:"jumat"},{id:6,display:"sabtu",value:"sabtu"},{id:7,display:"minggu",value:"minggu"}],F=o.kelompok.sort((e,t)=>e.area-t.area).map(e=>({id:e.area,value:e.area,display:e.area})),v=e=>{const t={...x,[e.target.name]:e.target.value};L.get(window.location.href,{data:t},{onBefore:()=>N(!0),onFinish:()=>N(!1)})},I=e=>{let t=null;return e.map((d,l)=>{const p=new Date(d).getMonth()+1;let s=null;return t==null||t==p?s=a("th",{className:"w-16 text-center px-6 py-3",children:m(d).format("DD/MM")},`headerDate${l}`):s=n(g,{children:[a("th",{className:"w-16 text-center px-6 py-3",children:"TTL Angsuran"},`headerTotalAngs${l}`),a("th",{className:"w-16 text-center px-6 py-3",children:"Saldo"},`headerSaldoperMonth${l}`),a("th",{className:"w-16 text-center px-6 py-3",children:m(d).format("DD/MM")},`headerAfterMonth${l}`)]}),t=p,s})},$=(e,t)=>{let d=null,l=0,p=0;return e.map((s,h)=>{const b=new Date(s).getMonth()+1;let y=null;return d==null||d==b?y=a("td",{className:`text-center whitespace-nowrap text-sm px-6 py-3 ${t.angsuran.filter(r=>r.pembayaran_date==s).map(r=>r.danatitipan).join(", ")=="true"?"text-red-500":""}`,tanggal_id:m(s).format("DD/MM"),children:(()=>{if(t.angsuran.some(r=>r.pembayaran_date===s)){const r=t.angsuran.filter(i=>i.pembayaran_date==s).map(i=>(l+=parseInt(i.jumlah),p=parseInt(i.saldo_terakhir),parseInt(i.jumlah))).join(", ");return a(c,{value:r,displayType:"text",thousandSeparator:",",prefix:"Rp. "})}})()},`valueAngsuran${h}`):y=n(g,{children:[a("td",{className:"text-center whitespace-nowrap text-sm px-6 py-3 bg-yellow-50",children:a(c,{value:l,displayType:"text",thousandSeparator:",",prefix:"Rp. "})},`valueTotalAngsuran${h}`),a("td",{className:"text-center whitespace-nowrap text-sm px-6 py-3 bg-yellow-50",children:a(c,{value:p,displayType:"text",thousandSeparator:",",prefix:"Rp. "})},`valueSaldoperMonth${h}`),a("td",{className:`text-center whitespace-nowrap text-sm px-6 py-3 ${t.angsuran.filter(r=>r.pembayaran_date==s).map(r=>r.danatitipan).join(", ")=="true"?"text-red-500":""}`,tanggal_id:m(s).format("DD/MM"),children:(()=>{if(t.angsuran.some(r=>r.pembayaran_date===s)){const r=t.angsuran.filter(i=>i.pembayaran_date==s).map(i=>(l=0,l+=parseInt(i.jumlah),p=parseInt(i.saldo_terakhir),parseInt(i.jumlah))).join(", ");return a(c,{value:r,displayType:"text",thousandSeparator:",",prefix:"Rp. "})}else l=parseInt(0),l+=parseInt(0)})()},`valueAngsuranAwalBulan${h}`)]}),d=b,y})};return n(H,{auth:o.auth,errors:o.errors,header:a(g,{children:a("h2",{className:"font-semibold text-xl text-main-800 leading-tight",children:"Data Storting"})}),children:[a(C,{title:"Data Storting"}),a(P,{show:_}),a(Y,{data:A,onClose:S,mantri:o.mantri}),a(E,{data:k,closedModal:D}),a("div",{className:"py-3",children:a("div",{className:"mx-auto sm:px-6 lg:px-8",children:a("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:n("div",{className:"border p-6 text-main-800",children:[n("div",{className:"flex justify-between w-full items-center mb-6",children:[n("div",{className:"flex gap-3 items-center",children:[a(M,{value:"Kelompok :",className:"font-semibold"}),a(j,{value:x.kelompok??"",name:"kelompok",onChange:v,nullValue:!0,options:F})]}),n("div",{className:"flex gap-3 items-center ml-3",children:[a(M,{value:"Hari :",className:"font-semibold"}),a(j,{value:x.hari??"",name:"hari",onChange:v,nullValue:!0,options:T})]}),a("div",{className:"ml-auto",children:n("form",{className:"flex gap-3",children:[a(B,{placeholder:"Cari Nama",id:"searchFill"}),a(R,{type:"submit",title:"search"})]})})]}),a("div",{className:"relative overflow-x-auto shadow-md sm:rounded-lg text-main-800 mb-6 whitespace-pre-wrap",children:n("table",{className:"w-full text-sm text-left text-main-500 dark:text-main-400",children:[a("thead",{className:"text-xs text-main-700 uppercase bg-main-100 dark:bg-gray-700 dark:text-main-400",children:n("tr",{children:[a("th",{className:"px-6 py-3",children:"Nomor"}),a("th",{className:"px-6 py-3 whitespace-nowrap",children:"Tanggal Drop"}),a("th",{className:"px-6 py-3 whitespace-nowrap",children:"Nama Nasabah"}),a("th",{className:"px-6 py-3 whitespace-nowrap",children:"Â "}),a("th",{className:"px-6 py-3",children:"Alamat"}),a("th",{className:"px-6 py-3",children:"Kelompok"}),a("th",{className:"px-6 py-3",children:"Hari"}),a("th",{className:"px-6 py-3 whitespace-nowrap",children:"Pinjaman Ke"}),a("th",{className:"px-6 py-3 whitespace-nowrap",children:"Jml Angsuran"}),a("th",{className:"px-6 py-3 whitespace-nowrap",children:"Besar Pinjaman"}),I(o.display_tanggal)]})}),a("tbody",{children:o.pinjaman.map((e,t)=>n("tr",{children:[a("td",{className:"px-6 py-3",children:e.loan_request_id}),a("td",{className:"px-6 py-3",children:m(e.tanggal_drop).format("DD-MM-YYYY")}),n("td",{className:"px-6 py-3 hover:bg-gray-100 hover:cursor-pointer text-blue-500",onClick:d=>f({show:!0,dataArray:e}),children:[a("div",{className:"w-full border-b-2 whitespace-nowrap",children:e.customer.nama}),a("span",{className:"text-main-600 italic",children:e.customer.nik})]}),a("td",{className:"px-6 py-3 whitespace-nowrap ",children:n("div",{className:"flex items-center justify-between gap-3 w-full",children:[a("div",{children:e.loan_notes}),a(K,{onClick:d=>w({show:!0,dataArray:e}),className:"hover:cursor-pointer text-md"})]})}),a("td",{className:"px-6 py-3",children:e.customer.alamat}),a("td",{className:"px-6 py-3",children:e.kelompok}),a("td",{className:"px-6 py-3",children:e.hari}),a("td",{className:"px-6 py-3",children:"1"}),a("td",{className:"px-6 py-3",children:e.angsuran.length}),a("td",{className:"px-6 py-3 whitespace-nowrap",children:a(c,{value:e.pinjaman,displayType:"text",thousandSeparator:",",prefix:"Rp. "})}),$(o.display_tanggal,e)]},`reportangsuran${t}`))})]})})]})})})})]})};export{pa as default};

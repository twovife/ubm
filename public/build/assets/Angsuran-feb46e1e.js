import{r as i,j as t,a,F as k,n as j,g as S}from"./app-8fb6b507.js";import{I as x}from"./InputLabel-6d9729ee.js";import{L as A}from"./Loading-7f184f23.js";import{P as M}from"./PrimaryButton-6ea471c5.js";import{S as g}from"./SelectList-00da7599.js";import{T as D}from"./TextInput-5a7ee83f.js";import{A as F}from"./AuthenticatedLayout-6a00dfa7.js";import{d as p}from"./dayjs.min-459fb0fa.js";import{N as o}from"./react-number-format.es-6000462e.js";import C from"./ModalAngsuran-5bda3a56.js";import"./transition-f3cfaab5.js";import"./index.esm-20c35947.js";import"./iconBase-a1a882b7.js";import"./index.esm-6a2c5e3e.js";import"./Modal-04198d88.js";const q=({...s})=>{const[y,c]=i.useState(!1),N=e=>{c(!1)},[f,h]=i.useState(!1),[n,L]=i.useState({search:"",hari:"",kelompok:"",...s.dataFilters});i.useState({show:!1,textAlert:null,typeAlert:null});const w=[{id:1,display:"senin",value:"senin"},{id:2,display:"selasa",value:"selasa"},{id:3,display:"rabu",value:"rabu"},{id:4,display:"kamis",value:"kamis"},{id:5,display:"jumat",value:"jumat"},{id:6,display:"sabtu",value:"sabtu"},{id:7,display:"minggu",value:"minggu"}],v=s.kelompok.sort((e,r)=>e.area-r.area).map(e=>({id:e.id,value:e.area,display:e.area})),u=e=>{const r={...n,[e.target.name]:e.target.value};S.get(route("unit.pinjaman.angsuran.index"),{data:r},{onBefore:()=>h(!0),onFinish:()=>h(!1)})};return t(F,{auth:s.auth,errors:s.errors,header:a(k,{children:a("h2",{className:"font-semibold text-xl text-main-800 leading-tight",children:"Data Storting"})}),children:[a(j,{title:"Data Storting"}),a(A,{show:f}),a(C,{data:y,onClose:N,mantri:s.mantri}),a("div",{className:"py-3",children:a("div",{className:"mx-auto sm:px-6 lg:px-8",children:a("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:t("div",{className:"border p-6 text-main-800",children:[t("div",{className:"flex justify-between w-full items-center mb-6",children:[t("div",{className:"flex gap-3 items-center",children:[a(x,{value:"Kelompok :",className:"font-semibold"}),a(g,{value:n.kelompok??"",name:"kelompok",onChange:u,nullValue:!0,options:v})]}),t("div",{className:"flex gap-3 items-center ml-3",children:[a(x,{value:"Hari :",className:"font-semibold"}),a(g,{value:n.hari??"",name:"hari",onChange:u,nullValue:!0,options:w})]}),a("div",{className:"ml-auto",children:t("form",{className:"flex gap-3",children:[a(D,{placeholder:"Cari Nama",id:"searchFill"}),a(M,{type:"submit",title:"search"})]})})]}),a("div",{className:"relative overflow-x-auto shadow-md sm:rounded-lg text-main-800 mb-6 whitespace-pre-wrap",children:t("table",{className:"w-full text-sm text-left text-main-500 dark:text-main-400",children:[a("thead",{className:"text-xs text-main-700 uppercase bg-main-100 dark:bg-gray-700 dark:text-main-400",children:t("tr",{children:[a("th",{className:"px-6 py-3",children:"Nomor"}),a("th",{className:"px-6 py-3 whitespace-nowrap",children:"Tanggal Drop"}),a("th",{className:"px-6 py-3 whitespace-nowrap",children:"Nama Nasabah"}),a("th",{className:"px-6 py-3",children:"Alamat"}),a("th",{className:"px-6 py-3",children:"Kelompok"}),a("th",{className:"px-6 py-3",children:"Hari"}),a("th",{className:"px-6 py-3 whitespace-nowrap",children:"Pinjaman Ke"}),a("th",{className:"px-6 py-3 whitespace-nowrap",children:"Jml Angsuran"}),a("th",{className:"px-6 py-3 whitespace-nowrap",children:"Besar Pinjaman"}),a("th",{className:"px-6 py-3",children:"Saldo"}),s.display_tanggal.map((e,r)=>a("th",{className:"w-16 text-center px-6 py-3",children:p(e).format("DD/MM")},`x${r}`))]})}),a("tbody",{children:s.pinjaman.map((e,r)=>t("tr",{children:[a("td",{className:"px-6 py-3",children:r+1}),a("td",{className:"px-6 py-3",children:p(e.tanggal_drop).format("DD-MM-YYYY")}),a("td",{className:"px-6 py-3 hover:bg-gray-100 hover:cursor-pointer text-blue-500",onClick:l=>c({show:!0,dataArray:e}),children:e.customer.nama}),a("td",{className:"px-6 py-3",children:e.customer.alamat}),a("td",{className:"px-6 py-3",children:e.kelompok}),a("td",{className:"px-6 py-3",children:e.hari}),a("td",{className:"px-6 py-3",children:"1"}),a("td",{className:"px-6 py-3",children:e.angsuran.length}),a("td",{className:"px-6 py-3 whitespace-nowrap",children:a(o,{value:e.pinjaman,displayType:"text",thousandSeparator:",",prefix:"Rp. "})}),a("td",{className:"px-6 py-3 whitespace-nowrap",children:a(o,{value:e.saldo,displayType:"text",thousandSeparator:",",prefix:"Rp. "})}),s.display_tanggal.map((l,b)=>a("td",{className:"text-center whitespace-nowrap text-sm",tanggal_id:p(l).format("DD/MM"),children:(()=>{if(e.angsuran.some(m=>m.pembayaran_date===l)){const m=e.angsuran.filter(d=>d.pembayaran_date==l).map(d=>d.jumlah).join(", ");return a(o,{value:m,displayType:"text",thousandSeparator:",",prefix:"Rp. "})}})()},`x2${b}`))]},r))})]})})]})})})})]})};export{q as default};

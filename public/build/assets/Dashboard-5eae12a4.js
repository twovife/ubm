import{r as l,j as a,a as s,R as _}from"./app-6b350258.js";import{C as i}from"./Navbar-d6dc625d.js";import"./DefaultTable-2056dd10.js";import{S as j}from"./Search-c6424d0e.js";import{A as F}from"./AuthenticatedLayout-525b99af.js";import{d as O}from"./dayjs.min-f8f99e8c.js";import{u as B,T as H,a as A,b as p,c as y,f as c,d as P,e as Y,g as L,h as z}from"./table-0e6de7d4.js";import{F as o}from"./FormatNumbering-7e0a9655.js";import{F as E}from"./index.esm-07504674.js";import{S as G,a as I}from"./scroll-area-6ef44868.js";import{D as U}from"./DeleteDialogContent-12c33ed1.js";import W from"./Outcome-68fd4b98.js";import{P as q}from"./PrimaryButton-38a62dbf.js";import"./iconBase-e1e919d8.js";import"./transition-725fd075.js";import"./index.esm-ac2c333a.js";import"./SelectList-f0d0fe1f.js";import"./useServerFilter-c7d84d6e.js";import"./TextInput-1c629780.js";import"./ButtonWrapper-e564710a.js";import"./Loading-dee41ab2.js";import"./utils-01642ffa.js";import"./react-number-format.es-6188b67c.js";import"./index-b54cf00b.js";import"./dialog-7116bd5a.js";import"./index-aa16c950.js";import"./index.esm-d3dd4622.js";import"./Checkbox-537c72a2.js";import"./InputError-c2bb987c.js";import"./InputLabel-d209c271.js";const Se=({branch:J,server_filters:Q,datas:d,saldo_akhir:w,...X})=>{const[h,x]=l.useState(!1),[g,N]=l.useState(()=>d);l.useEffect(()=>{N(d)},[d]);const k=e=>e.reduce((r,t)=>(r.saldo+=t.saldo||0,r.debit+=t.debit||0,r.kredit+=t.kredit||0,r.bop+=t.bop||0,r),{saldo:0,debit:0,kredit:0,bop:0}),[D,b]=l.useState(!1),C=e=>{b(!0)},v=e=>{b(!1)},[T,f]=l.useState(!1),[K,S]=l.useState(""),M=e=>{f(!0),S(route("mutation.delete_mutasi",e))},V=e=>{f(!1)},m=k(g),R=l.useMemo(()=>[{accessorKey:"deletable",id:"deletable",type:"action",cell:e=>e.getValue(),header:()=>"Action"},{accessorKey:"transaction_date",id:"transaction_date",cell:e=>a("div",{className:"text-center whitespace-nowrap",children:O(e.getValue()).format("DD-MM-YYYY")}),header:()=>"Tanggal"},{accessorKey:"type_transaksi",id:"type_transaksi",cell:e=>e.getValue(),header:()=>"Type"},{accessorKey:"keterangan",id:"keterangan",cell:e=>e.getValue(),header:()=>"Keterangan"},{accessorKey:"wilayah",id:"wilayah",cell:e=>e.getValue(),header:()=>"Wilayah"},{accessorKey:"unit",id:"unit",cell:e=>e.getValue(),header:()=>"Unit"},{accessorKey:"nama_karyawan",id:"nama_karyawan",cell:e=>e.getValue(),header:()=>"Nama Karyawan"},{accessorKey:"bop",id:"bop",className:"bg-green-100",cell:e=>a(o,{value:e.getValue()}),header:()=>"BOP",footer:e=>a(o,{value:m.bop})},{accessorKey:"debit",id:"debit",className:"bg-green-200",cell:e=>a(o,{value:e.getValue()}),header:()=>"Debit",footer:e=>a(o,{value:m.debit})},{accessorKey:"kredit",id:"kredit",className:"bg-red-100",cell:e=>a(o,{value:e.getValue()}),header:()=>"Kredit",footer:e=>a(o,{value:m.kredit})},{accessorKey:"saldo",id:"saldo",className:"bg-blue-100",cell:e=>a(o,{value:e.getValue()}),header:()=>"Saldo",footer:e=>a(o,{value:w})}],[]),n=B({data:g,columns:R,getCoreRowModel:z()});return s(F,{loading:h,children:[a(W,{open:D,onClosed:v}),s(i,{judul:"Buku Transaksi BOP",children:[a(i.subTitle,{children:s("div",{className:"flex lg:flex-row flex-col lg:justify-between items-center gap-3",children:[a(i.startContent,{className:"flex-wrap mb-3 lg:mb-0"}),a(i.endContent,{className:"flex-wrap",children:a(j,{loading:h,setLoading:x,urlLink:route("mutation.index"),localState:"mutation_index",availableMonth:!0,children:a(q,{onClick:C,title:'Lain"',size:"sm",type:"button",className:"block whitespace-nowrap",theme:"primary"})})})]})}),s(G,{className:"h-[60vh] lg:h-[75vh] w-full",children:[s(H,{className:"border",children:[a(A,{children:n.getHeaderGroups().map((e,r)=>a(p,{children:e.headers.map((t,u)=>a(y,{className:"text-center",children:c(t.column.columnDef.header,t.getContext())},u))},r))}),a(P,{children:n.getRowModel().rows.length?n.getRowModel().rows.map((e,r)=>a(_.Fragment,{children:a(p,{className:"text-center",children:e.getVisibleCells().map((t,u)=>a(Y,{className:t.column.columnDef.className,children:t.column.columnDef.type=="action"?a("div",{className:"flex items-center justify-center",children:a("div",{children:c(t.row.original.deletable)=="true"?a("button",{className:"bg-red-500 text-white rounded p-2",onClick:()=>M(t.row.original.id),children:a(E,{})}):""})}):c(t.column.columnDef.cell,t.getContext())},u))},r)},r)):null}),a(L,{children:n.getFooterGroups().map((e,r)=>a(p,{children:e.headers.map(t=>a(y,{className:"text-center bg-gray-100 text-black",children:c(t.column.columnDef.footer,t.getContext())},t.id))},r))})]}),a(I,{orientation:"horizontal"})]})]}),a(U,{open:T,onClosed:V,url:K})]})};export{Se as default};

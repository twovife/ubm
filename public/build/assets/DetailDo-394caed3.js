import{q as R,r as o,j as a,a as w,R as M,c as g}from"./app-b6de9a88.js";import{F as c}from"./FormatNumbering-655c195b.js";import{u as S,T as v,a as A,b as s,c as b,f as i,d as H,e as d,g as _,h as j}from"./table-64bbb9a0.js";import{d as F}from"./dayjs.min-85a77a5e.js";import"./react-number-format.es-8876b7fc.js";import"./utils-01642ffa.js";const E=({triggerId:n})=>{const{server_filter:f,datas:h}=R().props,[p,T]=o.useState([]),[x,m]=o.useState(!0);o.useState();const[u,y]=o.useState({totalPinjaman:0,totalPembayaran:0}),D=e=>e.reduce((l,t)=>(l.totalNominal+=t.nominal||0,l),{totalNominal:0}),N=o.useMemo(()=>[{accessorKey:"transaction_date",id:"transaction_date",cell:e=>a("div",{className:"text-center",children:e.getValue()&&F(e.getValue()).format("DD-MM-YYYY")}),footer:"Total",header:()=>"Tanggal Transaksi"},{accessorKey:"nominal",id:"nominal",cell:e=>a(c,{value:e.getValue()}),header:()=>"Pembayaran",footer:e=>a(c,{value:u.totalNominal})},{accessorKey:"total_pembayaran",id:"total_pembayaran",cell:e=>a(c,{value:e.getValue()}),header:()=>"Total Stor DO"}],[u]);o.useEffect(()=>{if(n===null)return;const e=new AbortController;return(async()=>{try{const t=await g.get(route("goroumrah.requestDoUnit"),{params:{branch_id:n,bulan:f.bulan},signal:e.signal});T(t.data.data);const C=D(t.data.data);y(C)}catch(t){g.isCancel(t)?console.log("Request canceled:",t.message):(setError(t),m(!1))}finally{m(!1)}})(),()=>{e.abort()}},[n,h]);const r=S({data:p,columns:N,getCoreRowModel:j(),debugTable:!0,debugHeaders:!0,debugColumns:!1});return a("div",{className:"max-h-[40vh] overflow-auto",children:w(v,{className:"text-xs lg:text-sm",children:[a(A,{children:r.getHeaderGroups().map(e=>a(s,{className:"bg-gray-100",children:e.headers.map(l=>a(b,{className:"text-center ",children:i(l.column.columnDef.header,l.getContext())},l.id))},e.id))}),a(H,{children:x?a(s,{children:a(d,{colSpan:"4",children:"SILAHKAN TUNGGU DATA MASIH DIMUAT"})}):r.getRowModel().rows.length?r.getRowModel().rows.map((e,l)=>a(M.Fragment,{children:a(s,{id:e.id,children:e.getVisibleCells().map(t=>a(d,{className:`w-1/4 ${t.column.columnDef.className}`,children:i(t.column.columnDef.cell,t.getContext())},t.id))},e.id)},e.id)):a(s,{children:a(d,{colSpan:"4",children:"Belum Ada Data Pembayaran Goro Umrah"})})}),a(_,{children:r.getFooterGroups().map(e=>a(s,{children:e.headers.map(l=>a(b,{className:"py-5 text-center text-blue-600 bg-gray-100",children:i(l.column.columnDef.footer,l.getContext())},l.id))},e.id))})]})})};export{E as default};

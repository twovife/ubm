import{W as v,r as s,j as a,a as w,R as C,b}from"./app-cb27f0a4.js";import{F as o,u as N,T as P,a as R,b as n,c as g,f as d,d as M,e as m,g as A,h as S}from"./index-9d4d2f33.js";import{d as H}from"./dayjs.min-1b466394.js";import"./react-number-format.es-28b01b43.js";import"./utils-01642ffa.js";const _=({triggerId:c})=>{const{server_filter:h}=v().props,[f,p]=s.useState([]),[y,u]=s.useState(!0);s.useState();const[i,T]=s.useState({totalPinjaman:0,totalPembayaran:0}),x=e=>e.reduce((l,t)=>(l.totalPinjaman+=t.pinjaman||0,l.totalPembayaran+=t.bayar||0,l),{totalPinjaman:0,totalPembayaran:0}),D=s.useMemo(()=>[{accessorKey:"transaction_date",id:"transaction_date",cell:e=>a("div",{className:"text-center",children:e.getValue()&&H(e.getValue()).format("DD-MM-YYYY")}),footer:"Total",header:()=>"Tanggal Transaksi"},{accessorKey:"pinjaman",id:"pinjaman",cell:e=>a(o,{value:e.getValue()}),header:()=>"",footer:e=>a(o,{value:i.totalPinjaman})},{accessorKey:"bayar",id:"bayar",cell:e=>a(o,{value:e.getValue()}),header:()=>"",footer:e=>a(o,{value:i.totalPembayaran})},{accessorKey:"sisa",id:"sisa",cell:e=>a(o,{value:e.getValue()}),header:()=>""}],[i]);s.useEffect(()=>{if(c===null)return;const e=new AbortController;return(async()=>{try{const t=await b.get(route("goroumrah.requestPinjamanUnit"),{params:{branch_id:c,bulan:h.bulan},signal:e.signal});p(t.data.data);const j=x(t.data.data);T(j)}catch(t){b.isCancel(t)?console.log("Request canceled:",t.message):(setError(t),u(!1))}finally{u(!1)}})(),()=>{e.abort()}},[c]);const r=N({data:f,columns:D,getCoreRowModel:S(),debugTable:!0,debugHeaders:!0,debugColumns:!1});return a("div",{className:"max-h-[40vh] overflow-auto",children:w(P,{className:"lg:text-sm text-xs bg-gray-50",children:[a(R,{children:r.getHeaderGroups().map(e=>a(n,{children:e.headers.map(l=>a(g,{className:"text-center",children:d(l.column.columnDef.header,l.getContext())},l.id))},e.id))}),a(M,{children:y?a(n,{children:a(m,{colSpan:"4",children:"SILAHKAN TUNGGU DATA MASIH DIMUAT"})}):r.getRowModel().rows.length?r.getRowModel().rows.map((e,l)=>a(C.Fragment,{children:a(n,{id:e.id,children:e.getVisibleCells().map(t=>a(m,{className:`w-1/4 ${t.column.columnDef.className}`,children:d(t.column.columnDef.cell,t.getContext())},t.id))},e.id)},e.id)):a(n,{children:a(m,{colSpan:"4",children:"Belum Ada Data Pembayaran Goro Umrah"})})}),a(A,{children:r.getFooterGroups().map(e=>a(n,{children:e.headers.map(l=>a(g,{className:"text-center bg-white text-blue-600 py-5",children:d(l.column.columnDef.footer,l.getContext())},l.id))},e.id))})]})})};export{_ as default};

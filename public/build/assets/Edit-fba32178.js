import{r as f,j as a,_ as P,a as e,F as T}from"./app-7b722207.js";import{I as i}from"./InputError-89371ae4.js";import{I as l}from"./InputLabel-581b8d07.js";import{P as I}from"./PrimaryButton-aac7732f.js";import{S as g}from"./SelectList-9103eee4.js";import{T as u}from"./TextInput-5b557729.js";import{u as E}from"./useServerFilter-947a2ad1.js";import{t as R}from"./transition-e2d9fa21.js";const A=f.forwardRef(function({type:v="text",className:c="",isFocused:n=!1,...s},d){const h=d||f.useRef();return f.useEffect(()=>{n&&h.current.focus()},[]),a("textarea",{...s,type:v,className:"border-gray-300 focus:border-main-500 focus:ring-main-500 rounded-md shadow-sm disabled:bg-gray-100 disabled:border disabled:rounded-md read-only:border-0 read-only:border-b read-only:rounded-none read-only:bg-main-100/50 read-only:focus:ring-0 "+c,ref:h})}),G=({show:b,setShow:v,setLoading:c,employee:n})=>{const{data:s,setData:d,put:h,reset:w,processing:W,errors:r}=P({});f.useEffect(()=>{d({nama_karyawan:n.nama_karyawan??null,nik:n.nik??null,alamat:n.alamat??null,branch_id:n.branch_id??null,hire_date:n.hire_date??null,jabatan:n.jabatan??null,area:n.area??null,janis_jaminan:n.janis_jaminan??null,status_kontrak:n.status_kontrak??null,date_resign:n.date_resign??null,resign_status:n.resign_status??null,resign_reson:n.resign_reson??null})},[n]);const{wilayah:k,filteredBranch:y,selectedWilayah:N,onWilayahChangeHandler:x}=E({propsWilayah:n.branch.wilayah}),j=[{id:1,value:"mantri",display:"Mantri"},{id:3,value:"admin",display:"Admin"},{id:4,value:"kasir",display:"Kasir"},{id:2,value:"kepala mantri",display:"Kepala Mantri"},{id:5,value:"wakil pimpinan",display:"Wakil Pimpinan"},{id:6,value:"pimpinan",display:"Pimpinan"},{id:7,value:"staf",display:"Staf"},{id:8,value:"staf kontrol",display:"Staf Kontrol"},{id:9,value:"pengawas",display:"Pengawas"}],C=[{id:1,value:1,display:"Cadangan"},{id:2,value:2,display:"Kontrak"}],t=m=>{const{name:o,value:p}=m.target;d(o,p)},q=m=>{const{name:o,value:p}=m.target,F={[o]:p,area:0};d(K=>({...K,...F}))},_=m=>{v(),w(),c(!1)},S=m=>{m.preventDefault(),h(route("emp.update",n.id),{onStart:o=>{c(!0)},onSuccess:o=>{_()},onError:o=>c(!1)})};return a(R,{as:f.Fragment,show:b,enter:"transition ease-out duration-200",enterFrom:"transform opacity-0",enterTo:"transform opacity-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100",leaveTo:"transform opacity-0",children:a("div",{className:"fixed top-0 left-0 border px-6 py-3 rounded w-full h-screen z-[100] flex items-center justify-center",onClick:_,children:a("div",{className:"p-3 rounded shadow-lg bg-white border max-w-2xl w-full max-h-screen overflow-auto",onClick:m=>m.stopPropagation(),children:e("form",{onSubmit:S,className:"mt-3 bg-inherit",children:[a("div",{className:"text-gray-500 font-semibold text-xl mono",children:"Tambah Karywan Baru"}),e("div",{className:"w-full mx-auto flex flex-col lg:flex-row",children:[e("div",{className:"flex-1 p-3",children:[e("div",{className:"mb-3",children:[a(l,{htmlFor:"nama_karyawan",value:"Nama Pegawai"}),a(u,{required:!0,onChange:t,className:"mt-1 w-full",name:"nama_karyawan",value:s.nama_karyawan,id:"nama_karyawan"}),a(i,{message:r.nama_karyawan,className:"mt-2"})]}),e("div",{className:"mb-3",children:[a(l,{htmlFor:"nik",value:"NIK"}),a(u,{required:!0,onChange:t,className:"mt-1 w-full",name:"nik",id:"nik",value:s.nik}),a(i,{message:r.nik,className:"mt-2"})]}),e("div",{className:"mb-3",children:[a(l,{required:!0,htmlFor:"alamat",value:"Alamat"}),a(A,{required:!0,onChange:t,className:"mt-1 w-full",name:"alamat",id:"alamat",value:s.alamat}),a(i,{message:r.alamat,className:"mt-2"})]}),e("div",{className:"mb-3",children:[a(l,{value:"Wilayah",className:"mb-1"}),a(g,{name:"wilayah",value:N,className:"w-full",nullValue:!0,options:k,onChange:x,required:!0})]}),N!==""&&e("div",{className:"mb-3",children:[a(l,{value:"Unit",className:"mb-1"}),a(g,{name:"branch_id",className:"w-full",value:s.branch_id,nullValue:!0,options:y,onChange:t,required:!0})]}),e("div",{className:"mb-3",children:[a(l,{htmlFor:"hire_date",value:"Tanggal masuk"}),a(u,{required:!0,onChange:t,className:"mt-1 w-full",name:"hire_date",id:"hire_date",value:s.hire_date,type:"date"}),a(i,{message:r.hire_date,className:"mt-2"})]}),e("div",{className:"flex flex-col lg:flex-row items-center justify-center gap-3 mb-3",children:[e("div",{className:"flex-1 w-full",children:[a(l,{value:"Jabatan"}),a(g,{required:!0,value:s.jabatan,className:"w-full",nullvalue:!0,options:j,name:"jabatan",onChange:q}),a(i,{message:r.jabatan,className:"mt-2"})]}),s.jabatan==="mantri"&&e("div",{className:"flex-1 w-full",children:[a(l,{value:"Kelompok"}),a(u,{className:"w-full",required:!0,name:"area",value:s.area,type:"number",min:"0",onChange:t}),a(i,{message:r.area,className:"mt-2"})]})]})]}),e("div",{className:"flex-1 p-3",children:[e("div",{className:"mb-3",children:[a(l,{htmlFor:"janis_jaminan",value:"Jenis Jaminan"}),a(u,{onChange:t,className:"mt-1 w-full",name:"janis_jaminan",id:"janis_jaminan",value:s.janis_jaminan}),a(i,{message:r.janis_jaminan,className:"mt-2"})]}),e("div",{className:"mb-3",children:[a(l,{value:"Status Kontrak"}),a(g,{required:!0,name:"status_kontrak",value:s.status_kontrak,className:"w-full",nullvalue:!0,options:C,onChange:t}),a(i,{message:r.status_kontrak,className:"mt-2"})]}),a("br",{}),n.resign_status&&e(T,{children:[e("div",{className:"mb-3",children:[a(l,{value:"Tanggal Resign"}),a(u,{required:!0,name:"date_resign",value:s.date_resign,className:"w-full",type:"date",onChange:t}),a(i,{message:r.date_resign,className:"mt-2"})]}),e("div",{className:"mb-3",children:[a(l,{value:"Status Resign"}),a(g,{required:!0,name:"resign_status",value:s.resign_status,className:"w-full",options:[{id:1,display:"Resign",value:"Resign"},{id:2,display:"Pecat",value:"Pecat"}],onChange:t}),a(i,{message:r.resign_status,className:"mt-2"})]}),e("div",{className:"mb-3",children:[a(l,{value:"Alasan Keluar"}),a(u,{required:!0,name:"resign_reson",value:s.resign_reson,className:"w-full",type:"text",onChange:t}),a(i,{message:r.resign_reson,className:"mt-2"})]})]})]})]}),a("div",{className:"flex justify-end items-end",children:a(I,{type:"submit",title:"Submit",theme:"green"})})]})})})})};export{G as default};

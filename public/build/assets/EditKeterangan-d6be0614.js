import{_ as w,r as j,a,j as e,F as D,n as T}from"./app-5e7661cb.js";import{A as _}from"./AuthenticatedLayout-42ba98f1.js";import{C as S}from"./ContentWrap-c40a73c6.js";import{T as x}from"./TextInput-77673762.js";import{C as b}from"./index.esm-d271e060.js";import{I as i}from"./InputLabel-5429deb7.js";import{P as s}from"./PrimaryButton-e2cf4c95.js";import{S as C}from"./SelectList-2ee9e46c.js";import{L as R}from"./Loading-56c8eb50.js";import{C as P}from"./Checkbox-40283d67.js";import{N as n}from"./react-number-format.es-66dff538.js";import{d as B}from"./dayjs.min-853a8b2d.js";import{L as N}from"./LinkButton-d7423dbb.js";import"./transition-cce791be.js";import"./index.esm-6abcaf5f.js";import"./iconBase-80e24d07.js";import"./index.esm-f5f9a13d.js";const Y=({loanrequest:l,...d})=>{const{data:r,setData:p,put:y,processing:f,errors:A}=w({mantri:l.mantri,tanggal_drop:l.tanggal_drop,pinjaman:l.pinjaman,pembayaran_date:l.loan.last_angsuran.pembayaran_date,jumlah:l.loan.last_angsuran.jumlah,danatitipan:l.loan.last_angsuran.danatitipan}),m=t=>{p(t.target.name,t.target.value)},h=(t,g)=>{p(g,t)},[v,o]=j.useState(!1),u=()=>{o(!1)},k=d.employees.map(t=>({id:t.id,value:t.id,display:`${t.nama_karyawan} - ${t.jabatan} ${t.area}`})),c=t=>{t.preventDefault(),y(route("unit.pinjaman.request.update",l.id))};return a(_,{auth:d.auth,errors:d.errors,header:e(D,{children:[a("h2",{className:"font-semibold text-xl text-main-800 leading-tight",children:"Revisi Pinjaman"}),a(T,{title:"Management User"}),e("div",{className:"ml-auto flex items-center gap-3",children:[a(N,{href:route("unit.pinjaman.request.bukutransaksi"),title:"Back"}),a(s,{title:"Delete",onClick:()=>o(!0),theme:"red"})]})]}),children:e("div",{className:"p-4 relative",children:[a("div",{onClick:u,className:`w-full h-full fixed top-0 left-0 z-50 bg-black/30 flex items-center justify-center ${v?"":"hidden"}`,children:e("div",{onClick:t=>t.stopPropagation(),className:"max-w-md bg-white w-full shadow border border-gray-200 rounded p-6",children:[a("div",{className:"font-semibold",children:"Menghapus Data juga akan menghapus Angsuran dan Pinjaman yang berkaitan."}),e("div",{className:"flex gap-3 items-center justify-end",children:[a(s,{title:"Batal",onClick:u}),a(N,{as:"button",title:"Hapus",theme:"red",href:route("unit.pinjaman.request.destroy",l.id),method:"delete"})]})]})}),a(R,{show:f}),e(S,{children:[e("div",{className:"grid lg:grid-cols-3 gap-3 mb-6",children:[e("form",{onSubmit:c,className:"col-span-1 border p-4 shadow rounded relative",children:[l.loan.last_angsuran&&a("div",{className:"w-full h-full absolute bg-white/20 top-0 left-0 flex justify-center items-center",children:a("h1",{className:"text-3xl",children:"Data Tidak Dapat Diubah"})}),a("h1",{className:"mb-3 font-semibold",children:"Revisi Data"}),e("div",{className:"mb-3",children:[a(i,{value:"Tanggal Drop",className:"mb-1"}),a(x,{name:"tanggal_drop",type:"date",onChange:m,className:"w-full",value:r.tanggal_drop})]}),e("div",{className:"mb-3",children:[a(i,{value:"Mantri & Kelompok",className:"mb-1"}),a(C,{options:k,name:"mantri",type:"date",onChange:m,className:"w-full",value:r.mantri})]}),a("div",{className:"mb-3",children:a(s,{title:"Update",type:"submit",className:"ml-auto"})}),e("div",{className:"mb-3 text-sm text-gray-400 italic",children:["NB:",e("ul",{className:"list-disc px-4",children:[a("li",{children:"Merubah Mantri akan mempengaruhi perubahan area."}),a("li",{children:"Hanya dapat diubah ketika pinjaman belum pernah diangsur."})]})]})]}),e("form",{onSubmit:c,className:"col-span-1 border p-4 shadow rounded relative",children:[l.loan.last_angsuran&&a("div",{className:"w-full h-full absolute bg-white/20 top-0 left-0 flex justify-center items-center",children:a("h1",{className:"text-3xl",children:"Data Tidak Dapat Diubah"})}),a("h1",{className:"mb-3 font-semibold",children:"Revisi Drop"}),e("div",{className:"mb-3",children:[a(i,{value:"Tanggal Drop",className:"mb-1"}),a(b,{name:"pinjaman",id:"pinjaman",className:"border-gray-300 focus:border-brand-500 focus:ring-brand-500 bg-white dark:bg-gray-800 rounded-md shadow-sm block w-full mt-2",allowDecimals:!1,prefix:"Rp. ",min:1,required:!0,onValueChange:h,value:r.pinjaman,placeholder:"Inputkan angka tanpa sparator"})]}),a("div",{className:"mb-3",children:a(s,{type:"submit",title:"Update",className:"ml-auto"})}),e("div",{className:"mb-3 text-sm text-gray-400 italic",children:["NB:",e("ul",{className:"list-disc px-4",children:[a("li",{children:"Merubah DROP akan mempengaruhi Besar Pinjaman."}),a("li",{children:"Drop Hanya dapat diubah ketika pinjaman belum pernah diangsur."})]})]})]}),e("form",{onSubmit:c,className:"col-span-1 border p-4 shadow rounded",children:[a("h1",{className:"mb-3 font-semibold",children:"Revisi Angsuran"}),e("div",{className:"mb-3",children:[a(i,{value:"Tanggal Angsuran",className:"mb-1"}),a(x,{name:"tanggal_drop",type:"date",disabled:!0,className:"w-full",value:r.pembayaran_date})]}),e("div",{className:"mb-3",children:[a(i,{value:"Tanggal Drop",className:"mb-1"}),a(b,{name:"jumlah",id:"jumlah",className:"border-gray-300 focus:border-brand-500 focus:ring-brand-500 bg-white dark:bg-gray-800 rounded-md shadow-sm block w-full mt-2",allowDecimals:!1,prefix:"Rp. ",min:1,required:!0,onValueChange:h,value:r.jumlah,placeholder:"Inputkan angka tanpa sparator"})]}),a("div",{className:"mb-3",children:e("label",{className:"flex items-center",children:[a(P,{name:"danatitipan",value:r.danatitipan,onChange:m}),a("span",{className:"ml-2 text-sm text-gray-600",children:"Dana Titipan DO?"})]})}),a("div",{className:"mb-3",children:a(s,{title:"Update",type:"submit",className:"ml-auto"})}),e("div",{className:"mb-3 text-sm text-gray-400 italic",children:["NB:",a("ul",{className:"list-disc px-4",children:a("li",{children:"Hanya Angsuran Terakhir yang dapat di edit."})})]})]})]}),e("div",{className:"grid lg:grid-cols-3 gap-3",children:[a("div",{className:"col-span-1 border p-4 shadow rounded",children:e("table",{className:"w-full text-sm text-left text-main-500 dark:text-main-400",children:[a("thead",{className:"text-xs text-main-700 uppercase bg-main-100 dark:bg-gray-700 dark:text-main-400",children:a("tr",{children:a("th",{className:"px-6 py-3",colSpan:"2",children:"Data Buku Transaksi"})})}),e("tbody",{children:[e("tr",{className:"bg-green-200 text-black",children:[a("th",{className:"px-6 py-3",children:"ID Customer"}),a("td",{className:"px-6 py-3",children:l.id})]}),e("tr",{className:"bg-green-200 text-black",children:[a("th",{className:"px-6 py-3",children:"Nama Nasabah"}),e("td",{className:"px-6 py-3",children:[a("div",{children:l.customer.nama}),a("div",{className:"font-thin italic",children:l.customer.nik})]})]}),e("tr",{children:[a("th",{className:"px-6 py-3",children:"Tanggal Permintaan Drop"}),a("td",{className:"px-6 py-3",children:l.tanggal_drop})]}),e("tr",{children:[a("th",{className:"px-6 py-3",children:"Hari / Kelompok"}),a("td",{className:"px-6 py-3",children:a("div",{children:`${l.hari} / ${l.kelompok} `})})]}),e("tr",{children:[a("th",{className:"px-6 py-3",children:"Jumlah Permintaan Drop"}),a("td",{className:"px-6 py-3 whitespace-nowrap",children:a(n,{value:l.pinjaman,displayType:"text",thousandSeparator:",",prefix:"Rp. "})})]})]})]})}),a("div",{className:"col-span-1 border p-4 shadow rounded",children:e("table",{className:"w-full text-sm text-left text-main-500 dark:text-main-400",children:[a("thead",{className:"text-xs text-main-700 uppercase bg-main-100 dark:bg-gray-700 dark:text-main-400",children:a("tr",{children:a("th",{className:"px-6 py-3",colSpan:"2",children:"Data Pinjaman"})})}),e("tbody",{children:[e("tr",{children:[a("th",{className:"px-6 py-3",children:"Tanggal Drop"}),a("td",{className:"px-6 py-3",children:l.loan.tanggal_drop})]}),e("tr",{children:[a("th",{className:"px-6 py-3",children:"Hari / Kelompok"}),a("td",{className:"px-6 py-3",children:a("div",{children:`${l.loan.hari} / ${l.loan.kelompok} `})})]}),e("tr",{children:[a("th",{className:"px-6 py-3",children:"Jumlah Permintaan Drop"}),a("td",{className:"px-6 py-3 whitespace-nowrap",children:a(n,{value:l.loan.drop,displayType:"text",thousandSeparator:",",prefix:"Rp. "})})]}),e("tr",{children:[a("th",{className:"px-6 py-3",children:"Jumlah Pinjaman"}),a("td",{className:"px-6 py-3 whitespace-nowrap",children:a(n,{value:l.loan.pinjaman,displayType:"text",thousandSeparator:",",prefix:"Rp. "})})]}),e("tr",{children:[a("th",{className:"px-6 py-3",children:"Saldo Pinjaman"}),a("td",{className:"px-6 py-3 whitespace-nowrap",children:a(n,{value:l.loan.saldo,displayType:"text",thousandSeparator:",",prefix:"Rp. "})})]})]})]})}),a("div",{className:"col-span-1 border p-4 shadow rounded",children:e("table",{className:"w-full text-xs text-left text-main-500 dark:text-main-400",children:[a("thead",{className:"text-main-700 uppercase bg-main-100 dark:bg-gray-700 dark:text-main-400 text-center",children:e("tr",{children:[a("th",{className:"px-3 py-3",children:"Tanggal"}),a("th",{className:"px-3 py-3",children:"Jumlah Angsuran"}),a("th",{className:"px-3 py-3",children:"Total Angsuran"}),a("th",{className:"px-3 py-3",children:"Saldo Terakhir"})]})}),a("tbody",{children:l.loan.angsuran.map((t,g)=>e("tr",{children:[a("th",{className:"px-3 py-3",children:B(t.pembayaran_date).format("DD-MM")}),a("td",{className:"px-3 py-3 whitespace-nowrap",children:a(n,{value:t.jumlah,displayType:"text",thousandSeparator:",",prefix:"Rp. "})}),a("td",{className:"px-3 py-3 whitespace-nowrap",children:a(n,{value:t.total_angsuran,displayType:"text",thousandSeparator:",",prefix:"Rp. "})}),a("td",{className:"px-3 py-3 whitespace-nowrap",children:a(n,{value:t.saldo_terakhir,displayType:"text",thousandSeparator:",",prefix:"Rp. "})})]}))})]})})]})]})]})})};export{Y as default};

import{r as l,j as a,a as s,R as C}from"./app-e6631525.js";import{A as M,C as m}from"./AuthenticatedLayout-f01156ba.js";import{F as n}from"./FormatNumbering-38a54234.js";import{S as R}from"./Search-ed01c3f6.js";import{u as S,T as j,a as D,b as c,c as x,f as d,d as F,e as y,g as P,h as V}from"./table-b96b72db.js";import $ from"./DetailGoro-597d9f65.js";import{a as G}from"./index.esm-ddb5b020.js";import{d as K}from"./dayjs.min-bffc377f.js";import"./transition-89a9d732.js";import"./Loading-78d94aa2.js";import"./iconBase-efca1206.js";import"./index.esm-9c87fcd3.js";import"./react-number-format.es-d30cf6af.js";import"./PrimaryButton-e2b4bcd5.js";import"./SelectList-200f0b93.js";import"./useServerFilter-015ddb1d.js";import"./TextInput-4f709a00.js";import"./ButtonWrapper-ea028bb5.js";import"./utils-01642ffa.js";import"./DetailPerUnitGoro-8bbfb59f.js";import"./Create-82462e08.js";import"./dialog-16576d8a.js";import"./index-b84245f1.js";import"./InputLabel-e390bfe4.js";import"./index.esm-d057f182.js";import"./InputError-cd46b170.js";const ce=({datas:u,...p})=>{const N=K(p.server_filter.bulan).format("MMM"),[h,w]=l.useState(!1),[g,T]=l.useState(()=>u);l.useEffect(()=>{T(u)},[u]);const[r,_]=l.useState(),f=e=>{_(t=>t===e?null:e)},b=(e=>e.reduce((t,o)=>(t.totalNominal+=o.sum_nominal_on||0,t.totalPembayaran+=o.total_pembayaran||0,t),{totalNominal:0,totalPembayaran:0}))(g),v=l.useMemo(()=>[{accessorKey:"wilayah",id:"collapse",cell:e=>e.getValue(),header:()=>"Wilayah"},{accessorKey:"sum_nominal_on",id:"sum_nominal_on",cell:e=>a(n,{value:e.getValue()}),header:()=>`Bulan ${N}`,footer:e=>a(n,{value:b.totalNominal})},{accessorKey:"total_pembayaran",id:"total_pembayaran",cell:e=>a(n,{value:e.getValue()}),header:()=>"Total Goro",footer:e=>a(n,{value:b.totalPembayaran})},{accessorKey:"sisa_goro",id:"sisa_goro",cell:e=>a(n,{value:e.getValue()}),header:()=>"Sisa Goro"}],[]),i=S({data:g,columns:v,getCoreRowModel:V()});return l.useEffect(()=>{f(parseInt(p.wilayah_show.wilayah))},[]),a(M,{loading:h,children:s(m,{judul:"Goro Umrah",children:[a(m.subTitle,{children:s("div",{className:"flex flex-col items-center gap-3 lg:flex-row lg:justify-between",children:[a(m.startContent,{className:"flex-wrap mb-3 lg:mb-0"}),a(m.endContent,{className:"flex-wrap",children:a(R,{loading:h,setLoading:w,urlLink:route("goroumrah.goro_index"),localState:"goroumrah_goro_index",availableMonth:!0})})]})}),a("div",{className:"overflow-auto rounded-lg shadow",children:s(j,{className:"border",children:[a(D,{children:i.getHeaderGroups().map(e=>a(c,{children:e.headers.map(t=>a(x,{className:`text-center lg:whitespace-nowrap whitespace-pre-line duration-300 ease-linear ${r?"text-transparent":""}`,children:d(t.column.columnDef.header,t.getContext())},t.id))},e.id))}),a(F,{children:i.getRowModel().rows.length?i.getRowModel().rows.map((e,t)=>s(C.Fragment,{children:[a(c,{id:e.id,className:`${r==e.id?"border-b-0 bg-green-100":""}`,children:e.getVisibleCells().map(o=>a(y,{className:o.column.columnDef.className,children:o.column.id=="collapse"?s("div",{className:"flex items-center justify-center w-full gap-3",children:[a("button",{onClick:()=>f(e.id),className:`flex justify-center items-start hover:text-roman-500 ${r==e.id?"rotate-90 text-roman-500":""} `,children:a(G,{})}),a("div",{children:d(o.column.columnDef.cell,o.getContext())})]}):r==e.id?"":d(o.column.columnDef.cell,o.getContext())},o.id))},e.id),r==e.id&&a(c,{className:"p-0 hover:bg-transparent",children:a(y,{colSpan:"4",className:"p-0 border-0",children:a($,{triggerId:r})})},`newrow${e.id}`)]},e.id)):null}),r?"":a(P,{children:i.getFooterGroups().map(e=>a(c,{children:e.headers.map(t=>a(x,{className:"text-center text-black bg-gray-100",children:d(t.column.columnDef.footer,t.getContext())},t.id))},e.id))})]})})]})})};export{ce as default};

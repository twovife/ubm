import{r,a as o,j as e,R}from"./app-34cdcbf9.js";import{C as p}from"./Navbar-bd2e4a8a.js";import{P as j}from"./PrimaryButton-dc934c7f.js";import{A as P}from"./AuthenticatedLayout-82eb587a.js";import B from"./Create-8675d880.js";import{u as H,T as M,a as $,b as i,c as F,f as c,d as K,e as h,g as V}from"./index-0ecf6db6.js";import{S as z}from"./Search-5784ef56.js";import{F as L}from"./index.esm-cfd29145.js";import O from"./DataDetail-1e445386.js";import E from"./SearchByPlat-b7af5e58.js";import{S as G,a as I}from"./scroll-area-1d03f0e1.js";import"./iconBase-3fb63a17.js";import"./transition-c77e7de4.js";import"./index.esm-0334441d.js";import"./Loading-b6b2c8b9.js";import"./dialog-0511120a.js";import"./utils-01642ffa.js";import"./InputLabel-2e42cde8.js";import"./TextInput-0970bdd4.js";import"./index.esm-1aeaf8ef.js";import"./InputError-94b92dd1.js";import"./SelectList-9aed8459.js";import"./useServerFilter-6d653e23.js";import"./ButtonWrapper-1ebf408f.js";import"./dayjs.min-f5ed558d.js";import"./Edit-150ec842.js";const Ce=({datas:N,datas_by_plat_nomor:u,...U})=>{const[v,W]=r.useState(()=>N),[f,S]=r.useState(!1),[T,g]=r.useState(!1),y=a=>{g(!0)},_=a=>{g(!1)},[s,x]=r.useState(),[d,b]=r.useState(),[D,w]=r.useState(),k=(a,l,t)=>{if(s==l&&d==a)w(),x(),b();else{x(l);const n=t.filter(C=>a=="active"?C.is_active===1:C.is_active!==1);w(n),b(a)}},A=r.useMemo(()=>[{accessorKey:"branch",id:"branch",cell:a=>a.getValue(),header:()=>"Unit"},{accessorKey:"total_asset_aktif",id:"total_asset_aktif",type:"collapse",dataColapse:"active",cell:a=>a.getValue(),header:()=>"Asset Aktif"},{accessorKey:"total_asset_non_aktif",id:"total_asset_non_aktif",type:"collapse",dataColapse:"non",cell:a=>a.getValue(),header:()=>"Asset Non Aktif"}],[]),m=H({data:v,columns:A,getCoreRowModel:V()});return o(P,{loading:f,children:[o(p,{judul:"Aset Kendaraan",children:[e(p.subTitle,{children:e("div",{className:"flex lg:flex-row flex-col lg:justify-between items-center gap-3",children:e(p.endContent,{className:"flex-wrap",children:e(z,{loading:f,setLoading:S,urlLink:route("asset.kendaraan.index"),localState:"asset_kendaraan_index",FilterWilayahOnly:!0,availablePlanText:!0,planTextName:"plat_nomor",children:e(j,{type:"button",onClick:y,children:"Tambah Baru"})})})})}),u?e(E,{datas:u}):o(M,{className:"border text-xs lg:text-sm",children:[e($,{children:m.getHeaderGroups().map((a,l)=>e(i,{children:a.headers.map((t,n)=>e(F,{className:`text-center lg:whitespace-nowrap whitespace-pre-line duration-300 ease-linear ${s?"bg-green-200 text-black":""}`,children:c(t.column.columnDef.header,t.getContext())},n))},l))}),e(K,{className:"text-center",children:m.getRowModel().rows.length?m.getRowModel().rows.map((a,l)=>o(R.Fragment,{children:[e(i,{className:`${a.original.is_active==2?"bg-red-100 even:bg-red-50 hover:bg-red-200":""}`,children:a.getVisibleCells().map((t,n)=>e(h,{className:`${t.column.columnDef.className} w-1/3`,children:t.column.columnDef.type=="collapse"?o("div",{className:"flex w-full items-center justify-center gap-3",children:[e("button",{onClick:()=>k(t.column.columnDef.dataColapse,a.original.branch_id,a.original.datas),className:`flex justify-center items-start hover:text-roman-500 ${s==a.original.branch_id&&d==t.column.columnDef.dataColapse?"rotate-90 text-roman-500":""} `,children:e(L,{})}),e("div",{children:c(t.column.columnDef.cell,t.getContext())})]}):s==a.original.branch_id?o("div",{className:"grid lg:grid-cols-2 grid-cols-1",children:[c(t.column.columnDef.cell,t.getContext()),d=="non"?e("span",{className:"ml-1 px-2 py-1 bg-red-400 text-white rounded-full text-xs",children:"Non Active"}):e("span",{className:"ml-1 px-2 py-1 bg-green-400 text-white rounded-full text-xs",children:"Active"})]}):c(t.column.columnDef.cell,t.getContext())},n))},l),s==a.original.branch_id&&e(i,{className:"p-0 hover:bg-transparent",children:e(h,{colSpan:"3",className:"p-0 border-0",children:e("div",{className:"flex max-w-full relative overflow-auto w-full z-10 h-[50vh]",children:e("div",{className:"absolute top-0 w-full h-full z-20",children:o(G,{className:"h-full w-full",children:[e(O,{datas:D}),e(I,{orientation:"horizontal"})]})})})})},`newrow${l}`)]},l)):e(i,{children:e(h,{colSpan:"3",children:"Data Tidak Ada"})})})]})]}),e(B,{open:T,onClosed:_})]})};export{Ce as default};

import{a as e,j as a,W as J,r as g,F as D,g as K,d as W}from"./app-70b81897.js";import{L as z}from"./LinkButton-4bfd6587.js";import{P as R}from"./PrimaryButton-c7047bc2.js";import{S as Y}from"./SelectList-af969ce3.js";import{A as q,b as G}from"./AuthenticatedLayout-8d15f1c3.js";import{d as H}from"./dayjs.min-ce0772ea.js";import{h as U,e as Q,i as X,j as Z,a as $}from"./index.esm-ebf67a75.js";import{I as V}from"./index.esm-26df34de.js";import{N as ee}from"./react-number-format.es-cebb1fcd.js";import"./transition-34d0ea43.js";import"./index.esm-016fac53.js";import"./iconBase-78f29ae0.js";import"./Loading-8f8c1bcf.js";function te({currentPage:h,totalPages:p,onPageChange:b}){const x=h>1,w=h<p,c=Math.max(1,h-2),d=Math.min(p,c+4),u=Array.from({length:d-c+1},(m,y)=>c+y);return e("nav",{"aria-label":"Page navigation example",children:a("ul",{className:"flex items-center -space-x-px h-8 text-sm",children:[x&&e("li",{children:a("button",{onClick:()=>b(h-1),className:"flex items-center justify-center px-3 h-8 ml-0 leading-tight text-gray-500 bg-white border border-gray-300 rounded-l-lg hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",children:[e("span",{className:"sr-only",children:"Previous"}),e("svg",{className:"w-2.5 h-2.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10",children:e("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 1 1 5l4 4"})})]})}),u.map(m=>e("li",{children:e("button",{onClick:()=>b(m),disabled:h===m,className:"disabled:bg-gray-500 disabled:text-white flex items-center justify-center px-3 h-8 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",children:m})},m)),w&&e("li",{children:a("button",{onClick:()=>b(h+1),className:"flex items-center justify-center px-3 h-8 leading-tight text-gray-500 bg-white border border-gray-300 rounded-r-lg hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",children:[e("span",{className:"sr-only",children:"Next"}),e("svg",{className:"w-2.5 h-2.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10",children:e("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 9 4-4-4-4"})})]})})]})})}function re(h,p){const b=J().props,[x,w]=g.useState([{column:"",operators:"1",values:"",...h}]),[c,d]=g.useState({column:"",orderby:""}),[u,m]=g.useState(1),y=(r,n)=>{const o=r[n.column],s=n.values;return s==null||s===""?!0:parseInt(n.operators)===1?N(o,s):parseInt(n.operators)===2?j(o,s):!0},N=(r,n)=>{const o=r==null?void 0:r.toString().toLowerCase(),s=n==null?void 0:n.toString().toLowerCase();return!(typeof o=="string"&&!o.includes(s))},j=(r,n)=>r===n,k=b.employee.filter(r=>{for(const n of x)if(!y(r,n))return!1;return!0}).slice().sort((r,n)=>{const o=c.column,s=c.orderby;if(c.column!==""){if(s==="asc")return r[o]<n[o]?-1:r[o]>n[o]?1:0;if(s==="desc")return r[o]>n[o]?-1:r[o]<n[o]?1:0}return 0}),S=Math.ceil(k.length/p),f=k.slice((u-1)*p,u*p);return{filters:x,setFilters:w,orderData:c,setOrderData:d,currentPage:u,setCurrentPage:m,displayData:f,totalPages:S,handlePageChange:r=>{m(r)}}}const fe=({employee:h,branch:p,server_filters:b,...x})=>{const w=p.map(t=>({id:t.id,value:t.id,display:t.unit})),c=20,{filters:d,setFilters:u,orderData:m,setOrderData:y,currentPage:N,setCurrentPage:j,displayData:C,totalPages:k,handlePageChange:S}=re({},c),[f,_]=g.useState(""),[r,n]=g.useState({column:"",operators:"1",values:""}),[o,s]=g.useState(!1),F=(t,l="text")=>{_({column:t,format:l})};g.useEffect(()=>{const t=JSON.parse(localStorage.getItem("complainfilter"));t&&Object.keys(t).length>0&&u(t)},[]),g.useEffect(()=>{localStorage.setItem("complainfilter",JSON.stringify(d))},[d]),g.useEffect(()=>{const t=l=>{l.target.tagName=="TH"?(F(l.target.getAttribute("data-item"),l.target.getAttribute("data-format")),n({...r,column:l.target.getAttribute("data-item")})):F("")};return window.addEventListener("click",t),()=>{window.removeEventListener("click",t)}});const L=()=>{const t=[...d],l=t.findIndex(i=>i.column===r.column);l!==-1?t[l]=r:t.push(r),u(t)},I=t=>{const l=[...d];console.log(l);const i=d.filter(v=>v.column!==t);u(i)},B=t=>{const{name:l,value:i,type:v}=t.target;let A=i;v==="number"&&(A=parseInt(i)),n({...r,[l]:A})},M=t=>{t.preventDefault(),s(!0),K.visit(route("employee.index"),{data:{branch_id:t.target.value}})},T=()=>e("div",{className:"fixed text-white top-1/2 left-1/2 -translate-x-1/2",onClick:t=>t.stopPropagation(),children:e("div",{className:"bg-white border border-gray-300 rounded-lg shadow-lg",children:a("div",{className:"flex justify-end items-center text-2xl px-2 py-4",children:[a("div",{className:"flex flex-col-reverse",children:[e("input",{name:"column",value:r.column,onChange:t=>n({...r,column:t.target.value}),className:"border-0 border-b border-b-gray-400 text-black font-light text-sm px-1.5 py-1.5 focus:bg-gray-100 focus:outline-none focus:border-b-2 focus:border-b-blue-500 peer/column"}),e("label",{className:"text-gray-400 text-xs font-semibold peer-focus/column:text-blue-500",children:"Column"})]}),a("div",{className:"flex flex-col-reverse",children:[a("select",{name:"operators",value:r.operators,onChange:t=>n({...r,operators:t.target.value}),className:"border-0 border-b border-b-gray-400 text-black font-light text-sm px-1.5 py-1.5 focus:outline-none focus:border-b-2 focus:border-b-blue-500 focus:ring-0 peer/operator",children:[e("option",{value:"1",children:"contains"}),e("option",{value:"2",children:"equal"})]}),e("label",{className:"text-gray-400 text-xs font-semibold peer-focus/operator:text-blue-500",children:"Operator"})]}),a("div",{className:"flex flex-col-reverse",children:[e("input",{value:r.values,type:f.format=="number"?"number":f.format=="date"?"date":f.format=="currency"?"number":"text",onChange:B,name:"values",className:"border-0 border-b border-b-gray-400 text-black font-light text-sm px-1.5 py-1.5 focus:bg-gray-100 focus:outline-none focus:border-b-2 focus:border-b-blue-500 peer/value"}),e("label",{className:"text-gray-400 text-xs font-semibold peer-focus/value:text-blue-500",children:"Value"})]}),a("div",{className:"flex items-center justify-center",children:[e("button",{onClick:L,className:"text-black text-xs border border-main-500 hover:bg-main-500 hover:text-white focus:bg-main-500 focus:text-white p-2 rounded-lg",children:"Go"}),e("button",{onClick:()=>y({column:f.column,orderby:"asc"}),className:"text-black border border-main-500 hover:bg-main-500 hover:text-white focus:bg-main-500 focus:text-white p-1 rounded-lg ml-3",children:e(X,{})}),e("button",{onClick:()=>y({column:f.column,orderby:"desc"}),className:"text-black border border-main-500 hover:bg-main-500 hover:text-white focus:bg-main-500 focus:text-white p-1 rounded-lg ml-1",children:e(Z,{})})]})]})})}),P=[{title:"Nama Karyawan",column:"nama"},{title:"NIK",column:"nik"},{title:"Alamat",column:"alamat"},{title:"Tanggal Masuk",column:"hire_date",format:"date"},{title:"Masa Kerja",column:"masa_kerja",format:"number"},{title:"Jabatan",column:"jabatan"},{title:"Area",column:"area",format:"number"},{title:"Unit",column:"unit"},{title:"Wilayah",column:"wilayah"},{title:"Jenis Jaminan",column:"janis_jaminan"},{title:"Tanggal Perpindahan",column:"tanggal_perpindahan",format:"date"},{title:"History Perpindahan",column:"history_perpindahan"},{title:"Keterangan Perpindahan",column:"keterangan_perpindahan"},{title:"Tanggal Berhenti",column:"date_resign",format:"date"},{title:"Keterangan Berhenti",column:"resign_status"},{title:"Tgl Pencairan SS",column:"pencairan_simpanan_date",format:"date"},{title:"Petugas",column:"pencairan_simpanan_by"},{title:"Tgl. Pencairan SW",column:"pencairan_simpanan_w_date",format:"date"},{title:"Petugas",column:"pencairan_simpanan_w_by"},{title:"Tgl Pengambilan Jaminan",column:"handover_jaminan",format:"date"},{title:"Petugas",column:"handover_jaminan_by"}],O=()=>C.length===0?e(D,{children:e("tbody",{children:e("tr",{children:e("td",{colSpan:"2",children:"Data Not Found"})})})}):e("tbody",{children:C.map((t,l)=>a("tr",{className:"bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 text-xs",children:[e("th",{className:"px-6 py-1",children:a("div",{className:"flex justify-around items-center gap-3",children:[(N-1)*c+l+1,e(W,{href:"#",children:e($,{className:"text-blue-500 hover:cursor-pointer"})})]})}),P.map((i,v)=>i.format=="date"?e("td",{className:"px-6 py-1",children:e("div",{className:"w-64 white whitespace-pre-wrap",children:t[i.column]!=="-"?H(t[i.column]).format("DD-MM-YYYY"):"-"})},v):i.format=="currency"?e("td",{className:"px-6 py-1",children:e("div",{className:"w-64 white whitespace-pre-wrap",children:e(ee,{value:t[i.column],displayType:"text",thousandSeparator:",",prefix:"Rp. "})})},v):e("td",{className:"px-6 py-1",children:e("div",{className:"w-64 white whitespace-pre-wrap",children:t[i.column]})},v))]},l))}),E=()=>{s(!0),localStorage.setItem("complainfilter",null),u([{column:"",operators:"1",values:""}]),y({column:"",orderby:""})};return e(q,{loading:o,auth:x.auth,errors:x.errors,header:a(D,{children:[e("h2",{className:"font-semibold text-xl text-main-800 leading-tight",children:"Daftar Karyawan"}),e("div",{className:"ml-auto flex items-center"})]}),children:e("div",{className:"py-3",children:e("div",{className:"mx-auto sm:px-6 lg:px-8",children:a("div",{className:"bg-white relative shadow-sm",children:[e("div",{className:"p-3",children:a("div",{className:"flex flex-col lg:flex-row lg:justify-between justify-center items-center mt-3 gap-3",children:[e("div",{children:e(Y,{value:b,options:w,nullValue:!0,onChange:M})}),a("div",{className:"flex items-center gap-3",children:[e(R,{onClick:E,size:"sm",theme:"other",icon:e(G,{}),title:"Reset"}),e(z,{as:"a",href:route("employee.create"),icon:e(V,{}),size:"md",title:"Tambah"})]})]})}),a("div",{className:"h-[70vh] overflow-auto relative",children:[e("div",{className:"mb-3 inline-block",children:d&&d.map(t=>t.column==""?null:a("div",{className:"flex items-center justify-start mb-2",children:[a("div",{className:"border rounded flex items-center",children:[e("div",{className:"p-2 text-lg bg-green-400 text-white",children:e(U,{})}),a("div",{className:"px-3 text-sm text-main-500",children:[e("span",{className:"mr-1 capitalize ",children:t.column}),e("span",{className:"mr-1 capitalize ",children:t.operators==1?"Contains":"="}),a("span",{children:["'",t.values,"'"]})]})]}),e("div",{className:"hover:border hover:bg-gray-300 hover:cursor-pointer rounded p-1 ml-2",onClick:()=>I(t.column),children:e(Q,{})})]}))}),a("table",{className:"w-full text-sm text-left text-gray-500",children:[e("thead",{className:"text-xs text-gray-900 uppercase bg-gray-200 sticky top-0 whitespace-nowrap",children:a("tr",{children:[e("th",{className:"px-6 py-4",children:"Nomor"}),P.map((t,l)=>a("th",{"data-item":t.column,"data-format":t.format??"text",scope:"col",className:"px-6 py-4 hover:bg-main-500 hover:text-white hover:cursor-pointer",children:[t.title,m.column==t.column&&e("span",{className:"ml-1 text-blue-400 italic",children:m.orderby}),f.column==t.column&&T()]},l))]})}),O()]})]}),e(te,{currentPage:N,totalPages:k,onPageChange:S})]})})})})};export{fe as default};

import{r as d,a as o,j as a,F as T}from"./app-b6de9a88.js";import{A as O,C as c}from"./AuthenticatedLayout-2fa8312a.js";import _ from"./PinjamanModalTable-19e9c60e.js";import{L as k}from"./LinkButton-7a3da68b.js";import{D as m}from"./useFilter-fcd98568.js";import{N as n}from"./react-number-format.es-8876b7fc.js";import{B as R}from"./ButtonWrapper-b2d34642.js";import{T as z,a as L,b as A,c as C}from"./tabs-b3b13658.js";import"./transition-96bf3998.js";import"./Loading-b832758a.js";import"./iconBase-27e1330c.js";import"./index.esm-92f3fdda.js";import"./index.esm-6f99eeaf.js";import"./dayjs.min-85a77a5e.js";import"./index-d1c09a71.js";import"./index-dbf6c4bb.js";import"./utils-01642ffa.js";const ta=({branch:B,server_filters:I,batch_datas:h,...D})=>{const[b,u]=d.useState(0),N=e=>{localStorage.setItem("tabsActive_pinjamanmodal_index",e),u(e)};d.useEffect(()=>{const e=localStorage.getItem("tabsActive_pinjamanmodal_index");u(parseInt(e)||0)},[]);const[x,S]=d.useState(!1),[p,v]=d.useState([]);d.useEffect(()=>{v(h)},[h]);const t=(e=>e.reduce((s,i)=>{const w=i.data.reduce((l,r)=>l+r.nominal_pinjaman_owner,0),y=i.data.reduce((l,r)=>l+r.nominal_pinjaman_pusat,0),j=i.data.reduce((l,r)=>l+r.saldo_pinjaman_owner,0),f=i.data.reduce((l,r)=>l+r.saldo_pinjaman_pusat,0),g=i.data.reduce((l,r)=>l+r.total_pinjaman,0),P=i.data.reduce((l,r)=>l+r.total_saldo_pinjaman,0);return s[i.wilayah]={pinjamanOwner:w,pinjamanPusat:y,saldoOwner:j,saldoPusat:f,pinjaman:g,saldo:P},s.totalPinjamanOwner+=w,s.totalPinjamanPusat+=y,s.totalSaldoPinjamanOwner+=j,s.totalSaldoPinjamanPusat+=f,s.totalPinjaman+=g,s.totalSaldo+=P,s},{wilayahs:{},totalPinjamanOwner:0,totalPinjamanPusat:0,totalSaldoPinjamanOwner:0,totalSaldoPinjamanPusat:0,totalPinjaman:0,totalSaldo:0}))(p);return o(O,{loading:x,children:[o(c,{judul:"Pinjaman Modal ",children:[a(c.subTitle,{children:a("div",{className:"flex flex-col items-center gap-3 lg:flex-row lg:justify-between",children:a(c.endContent,{className:"flex-wrap",children:a(R,{children:a(k,{href:route("pinjamanmodal.pinjaman_modal_create"),title:"Tambah Baru",size:"sm",type:"button",className:"block whitespace-nowrap",theme:"green"})})})})}),o(m,{children:[o(m.thead,{children:[a("th",{scope:"col",className:"px-6 py-1.5 whitespace-nowrap text-center",children:"Wilayah"}),a("th",{scope:"col",className:"px-6 py-1.5 whitespace-nowrap text-center",children:"Pinjaman Pak Hertawan"}),a("th",{scope:"col",className:"px-6 py-1.5 whitespace-nowrap text-center",children:"Saldo Pak Hertawan"}),a("th",{scope:"col",className:"px-6 py-1.5 whitespace-nowrap text-center",children:"Pinjaman Pusat"}),a("th",{scope:"col",className:"px-6 py-1.5 whitespace-nowrap text-center",children:"Saldo Pusat"}),a("th",{scope:"col",className:"px-6 py-1.5 whitespace-nowrap text-center",children:"Global Pinjaman"}),a("th",{scope:"col",className:"px-6 py-1.5 whitespace-nowrap text-center",children:"Global Saldo"})]}),a(m.tbody,{children:p.map(e=>o("tr",{className:"odd:bg-white even:bg-gray-100 hover:bg-roman-50/50 group",children:[a("td",{className:"px-3 py-1.5 sticky left-0 top-0 z-10 bg-inherit",children:e.wilayah}),a("td",{className:"px-3 py-1.5 sticky left-0 top-0 z-10 bg-inherit text-end",children:a(n,{value:t[e.wilayah].pinjamanOwner,displayType:"text",thousandSeparator:",",prefix:"Rp. "})}),a("td",{className:"px-3 py-1.5 sticky left-0 top-0 z-10 bg-inherit text-end",children:a(n,{value:t[e.wilayah].saldoOwner,displayType:"text",thousandSeparator:",",prefix:"Rp. "})}),a("td",{className:"px-3 py-1.5 sticky left-0 top-0 z-10 bg-inherit text-end",children:a(n,{value:t[e.wilayah].pinjamanPusat,displayType:"text",thousandSeparator:",",prefix:"Rp. "})}),a("td",{className:"px-3 py-1.5 sticky left-0 top-0 z-10 bg-inherit text-end",children:a(n,{value:t[e.wilayah].saldoPusat,displayType:"text",thousandSeparator:",",prefix:"Rp. "})}),a("td",{className:"px-3 py-1.5 sticky left-0 top-0 z-10 bg-inherit text-end",children:a(n,{value:t[e.wilayah].pinjaman,displayType:"text",thousandSeparator:",",prefix:"Rp. "})}),a("td",{className:"px-3 py-1.5 sticky left-0 top-0 z-10 bg-inherit text-end",children:a(n,{value:t[e.wilayah].saldo,displayType:"text",thousandSeparator:",",prefix:"Rp. "})})]}))}),a("tfoot",{children:o("tr",{className:"font-semibold text-black bg-blue-200",children:[a("td",{className:"px-3 py-1",children:"TOTAL"}),a("td",{className:"px-3 py-1 bg-green-500 text-white",children:a("div",{className:"whitespace-nowrap text-right",children:a(n,{value:t.totalPinjamanOwner,totalSaldoPinjamanOwner:!0,displayType:"text",thousandSeparator:",",prefix:"Rp. "})})}),a("td",{className:"px-3 py-1 bg-green-500 text-white",children:a("div",{className:"whitespace-nowrap text-right",children:a(n,{value:t.totalSaldoPinjamanOwner,displayType:"text",thousandSeparator:",",prefix:"Rp. "})})}),a("td",{className:"px-3 py-1 bg-green-500 text-white",children:a("div",{className:"whitespace-nowrap text-right",children:a(n,{value:t.totalPinjamanPusat,totalSaldoPinjamanOwner:!0,displayType:"text",thousandSeparator:",",prefix:"Rp. "})})}),a("td",{className:"px-3 py-1 bg-green-500 text-white",children:a("div",{className:"whitespace-nowrap text-right",children:a(n,{value:t.totalSaldoPinjamanPusat,displayType:"text",thousandSeparator:",",prefix:"Rp. "})})}),a("td",{className:"px-3 py-1 bg-green-500 text-white",children:a("div",{className:"whitespace-nowrap text-right",children:a(n,{value:t.totalPinjamanOwner,totalSaldoPinjamanOwner:!0,displayType:"text",thousandSeparator:",",prefix:"Rp. "})})}),a("td",{className:"px-3 py-1 bg-green-500 text-white",children:a("div",{className:"whitespace-nowrap text-right",children:a(n,{value:t.totalSaldoPinjamanOwner,displayType:"text",thousandSeparator:",",prefix:"Rp. "})})})]})})]})]}),a(c,{judul:"Per Wilayah ",children:a("div",{className:"w-full",children:o(z,{className:"w-full",value:b,children:[a(L,{children:p.length>0?p.map((e,s)=>a(A,{onClick:()=>N(e.wilayah),value:e.wilayah,className:"ml-3 first:ml-0",children:e.wilayah})):null}),a(T,{children:p.length>0?p.map((e,s)=>a(C,{value:e.wilayah,children:a(_,{data:e,loading:x,setLoading:S})})):null})]})})})]})};export{ta as default};

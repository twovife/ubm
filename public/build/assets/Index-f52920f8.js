import{r as l,j as a,a as s,R as C}from"./app-b6de9a88.js";import{A as M,C as m}from"./AuthenticatedLayout-2fa8312a.js";import{F as n}from"./FormatNumbering-655c195b.js";import{S as R}from"./Search-3b1b85fe.js";import{u as S,T as j,a as D,b as c,c as x,f as d,d as F,e as y,g as P,h as V}from"./table-64bbb9a0.js";import $ from"./DetailGoro-3ed4109a.js";import{a as G}from"./index.esm-92f3fdda.js";import{d as K}from"./dayjs.min-85a77a5e.js";import"./transition-96bf3998.js";import"./Loading-b832758a.js";import"./iconBase-27e1330c.js";import"./index.esm-6f99eeaf.js";import"./react-number-format.es-8876b7fc.js";import"./PrimaryButton-83d74b64.js";import"./SelectList-b0223152.js";import"./useServerFilter-6632701c.js";import"./TextInput-9b401af1.js";import"./ButtonWrapper-b2d34642.js";import"./utils-01642ffa.js";import"./DetailPerUnitGoro-9cf188bb.js";import"./Create-4e4848d5.js";import"./dialog-5f713545.js";import"./index-d1c09a71.js";import"./InputLabel-7ec19e62.js";import"./index.esm-20de4ddc.js";import"./InputError-741589bb.js";const ce=({datas:u,...p})=>{const N=K(p.server_filter.bulan).format("MMM"),[h,w]=l.useState(!1),[g,T]=l.useState(()=>u);l.useEffect(()=>{T(u)},[u]);const[r,_]=l.useState(),f=e=>{_(t=>t===e?null:e)},b=(e=>e.reduce((t,o)=>(t.totalNominal+=o.sum_nominal_on||0,t.totalPembayaran+=o.total_pembayaran||0,t),{totalNominal:0,totalPembayaran:0}))(g),v=l.useMemo(()=>[{accessorKey:"wilayah",id:"collapse",cell:e=>e.getValue(),header:()=>"Wilayah"},{accessorKey:"sum_nominal_on",id:"sum_nominal_on",cell:e=>a(n,{value:e.getValue()}),header:()=>`Bulan ${N}`,footer:e=>a(n,{value:b.totalNominal})},{accessorKey:"total_pembayaran",id:"total_pembayaran",cell:e=>a(n,{value:e.getValue()}),header:()=>"Total Goro",footer:e=>a(n,{value:b.totalPembayaran})},{accessorKey:"sisa_goro",id:"sisa_goro",cell:e=>a(n,{value:e.getValue()}),header:()=>"Sisa Goro"}],[]),i=S({data:g,columns:v,getCoreRowModel:V()});return l.useEffect(()=>{f(parseInt(p.wilayah_show.wilayah))},[]),a(M,{loading:h,children:s(m,{judul:"Goro Umrah",children:[a(m.subTitle,{children:s("div",{className:"flex flex-col items-center gap-3 lg:flex-row lg:justify-between",children:[a(m.startContent,{className:"flex-wrap mb-3 lg:mb-0"}),a(m.endContent,{className:"flex-wrap",children:a(R,{loading:h,setLoading:w,urlLink:route("goroumrah.goro_index"),localState:"goroumrah_goro_index",availableMonth:!0})})]})}),a("div",{className:"overflow-auto rounded-lg shadow",children:s(j,{className:"border",children:[a(D,{children:i.getHeaderGroups().map(e=>a(c,{children:e.headers.map(t=>a(x,{className:`text-center lg:whitespace-nowrap whitespace-pre-line duration-300 ease-linear ${r?"text-transparent":""}`,children:d(t.column.columnDef.header,t.getContext())},t.id))},e.id))}),a(F,{children:i.getRowModel().rows.length?i.getRowModel().rows.map((e,t)=>s(C.Fragment,{children:[a(c,{id:e.id,className:`${r==e.id?"border-b-0 bg-green-100":""}`,children:e.getVisibleCells().map(o=>a(y,{className:o.column.columnDef.className,children:o.column.id=="collapse"?s("div",{className:"flex items-center justify-center w-full gap-3",children:[a("button",{onClick:()=>f(e.id),className:`flex justify-center items-start hover:text-roman-500 ${r==e.id?"rotate-90 text-roman-500":""} `,children:a(G,{})}),a("div",{children:d(o.column.columnDef.cell,o.getContext())})]}):r==e.id?"":d(o.column.columnDef.cell,o.getContext())},o.id))},e.id),r==e.id&&a(c,{className:"p-0 hover:bg-transparent",children:a(y,{colSpan:"4",className:"p-0 border-0",children:a($,{triggerId:r})})},`newrow${e.id}`)]},e.id)):null}),r?"":a(P,{children:i.getFooterGroups().map(e=>a(c,{children:e.headers.map(t=>a(x,{className:"text-center text-black bg-gray-100",children:d(t.column.columnDef.footer,t.getContext())},t.id))},e.id))})]})})]})})};export{ce as default};

import{r,j as t,F,a,n as M,g as u}from"./app-d20bafc4.js";import{P as S}from"./PrimaryButton-c8eee1c4.js";import{A as D}from"./AuthenticatedLayout-fdbd8b19.js";import{I as Y}from"./index.esm-5fd3ea94.js";import{L as I}from"./LinkButton-380ab67b.js";import{M as L}from"./ModalAlert-b5f96596.js";import{S as p}from"./SelectList-4a9a1a81.js";import{I as x}from"./InputLabel-2554b077.js";import{T}from"./TextInput-658904e3.js";import{P as B}from"./Pagination-7a84f2bb.js";import{d as y}from"./dayjs.min-e534810a.js";import{L as _}from"./Loading-2a646a6d.js";import q from"./ActionPinjaman-e594593c.js";import{N as E}from"./react-number-format.es-154c5609.js";import"./transition-21fd0b76.js";import"./index.esm-fda7ca41.js";import"./iconBase-5615b2fc.js";import"./index.esm-58d64870.js";import"./Modal-51ee1583.js";const ia=({requestDrops:m,employee:f,...s})=>{const[i,g]=r.useState({search:"",hari:"",...s.dataFilters}),[N,n]=r.useState(!1),[v,c]=r.useState({show:!1,textAlert:null,typeAlert:null}),[b,o]=r.useState(!1),j=e=>{o(!1)},k=[{id:1,display:"senin",value:"senin"},{id:2,display:"selasa",value:"selasa"},{id:3,display:"rabu",value:"rabu"},{id:4,display:"kamis",value:"kamis"},{id:5,display:"jumat",value:"jumat"},{id:6,display:"sabtu",value:"sabtu"},{id:7,display:"minggu",value:"minggu"}],d=e=>{const l={...i,[e.target.name]:e.target.value};u.get(route("unit.pinjaman.request.requestPinjaman"),{data:l},{onBefore:()=>n(!0),onFinish:()=>n(!1)})},w=e=>{g({...i,search:e.target.value})},A=e=>{e.preventDefault();const l=document.getElementById("searchFill"),h={...i,search:l.value};u.get(route("unit.pinjaman.request.requestPinjaman"),{data:h},{onBefore:()=>n(!0),onFinish:()=>n(!1)})},P=e=>{c(!1)};r.useEffect(()=>{s.flash.message&&c({show:!0,textAlert:s.flash.message,typeAlert:"success"}),s.errors[0]&&c({show:!0,textAlert:s.errors[0],typeAlert:"danger"})},[]);const C=f.sort((e,l)=>e.area-l.area).map(e=>({id:e.id,value:e.area,display:e.area}));return t(D,{auth:s.auth,errors:s.errors,header:t(F,{children:[a("h2",{className:"font-semibold text-xl text-main-800 leading-tight",children:"Transaksi Drop"}),a("div",{className:"ml-auto flex items-center",children:s.canCreate&&a(I,{icon:a(Y,{}),size:"md",title:"Tambah Pinjaman",type:"a",href:route("unit.pinjaman.create")})})]}),children:[a(L,{alertParams:v,onClose:P}),a(M,{title:"Data Pinjaman"}),a(_,{show:N}),a(q,{onClose:j,data:b}),a("div",{className:"py-3",children:a("div",{className:"mx-auto sm:px-6 lg:px-8",children:a("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:t("div",{className:"border p-6 text-main-800",children:[t("div",{className:"flex justify-between w-full items-center mb-6",children:[t("div",{className:"flex gap-3 items-center",children:[a(x,{value:"Kelompok :",className:"font-semibold"}),a(p,{value:i.kelompok,name:"kelompok",onChange:d,options:C})]}),t("div",{className:"flex gap-3 items-center ml-3",children:[a(x,{value:"Hari :",className:"font-semibold"}),a(p,{value:i.hari,name:"hari",onChange:d,nullValue:!0,options:k})]}),a("div",{className:"ml-auto",children:t("form",{className:"flex gap-3",onSubmit:A,children:[a(T,{placeholder:"Cari Nama",id:"searchFill",className:"px-6",onChange:w,value:i.search}),a(S,{type:"submit",title:"search"})]})})]}),a("div",{className:"relative overflow-x-auto shadow-md sm:rounded-lg text-main-800 mb-6",children:t("table",{className:"w-full text-sm text-left text-main-500 dark:text-main-400",children:[a("thead",{className:"text-xs text-main-700 uppercase bg-main-100 dark:bg-gray-700 dark:text-main-400",children:t("tr",{children:[a("th",{className:"px-6 py-3",children:"Nomor"}),a("th",{className:"px-6 py-3",children:"Nama Customer"}),a("th",{className:"px-6 py-3",children:"NIK"}),a("th",{className:"px-6 py-3",children:"Alamat"}),a("th",{className:"px-6 py-3",children:"Kelompok"}),a("th",{className:"px-6 py-3",children:"Hari"}),a("th",{className:"px-6 py-3",children:"Jumlah Pengajuan"}),a("th",{className:"px-6 py-3",children:"Tanggal Drop"}),a("th",{className:"px-6 py-3",children:"Status"}),a("th",{className:"px-6 py-3",children:"Tanggal Disetujui"}),a("th",{className:"px-6 py-3",children:"Disetujui Oleh"}),a("th",{className:"px-6 py-3 bg-rose-100",children:"Mantri Bertugas"})]})}),a("tbody",{children:m&&m.data.map((e,l)=>t("tr",{className:`${e.status=="acc"?"bg-green-100":e.status=="tolak"?"bg-red-100":""}`,children:[a("td",{className:"px-6 py-3",children:e.id}),s.canCreate?a("td",{className:"px-6 py-3 hover:cursor-pointer hover:bg-gray-100 text-blue-500",onClick:h=>o({show:!0,id:e.id,disabled:e.status=="acc"}),children:e.customer.nama}):a("td",{className:"px-6 py-3",children:e.customer.nama}),a("td",{className:"px-6 py-3",children:e.customer.nik}),a("td",{className:"px-6 py-3",children:e.customer.alamat}),a("td",{className:"px-6 py-3",children:e.kelompok}),a("td",{className:"px-6 py-3",children:e.hari}),a("td",{className:"px-6 py-3",children:a(E,{value:e.pinjaman,displayType:"text",thousandSeparator:",",prefix:"Rp. "})}),a("td",{className:"px-6 py-3",children:y(e.tanggal_drop).format("DD-MM-YYYY")}),a("td",{className:"px-6 py-3 uppercase",children:e.status}),a("td",{className:"px-6 py-3",children:e.approved_date?y(e.approved_date).format("DD-MM-YYYY"):""}),a("td",{className:"px-6 py-3",children:e.approvedby?e.approvedby.nama_karyawan:""}),a("td",{className:"px-6 py-3",children:e.mantri?e.mantri.nama_karyawan:""})]},l))})]})}),a(B,{data:m})]})})})})]})};export{ia as default};

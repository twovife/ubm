import{r}from"./app-4f05f94d.js";function j(i,u,g){const[h,k]=r.useState(()=>i);r.useEffect(()=>{k(i)},[i]);const D=localStorage.getItem(g),f={oldFilter:[],oldPage:1};let n;try{n=JSON.parse(D),(!n||typeof n!="object"||!("oldFilter"in n)||!("oldPage"in n))&&(n=f)}catch{n=f}const{oldFilter:_,oldPage:v}=n,[C,y]=r.useState(!1),[o,w]=r.useState(_),[E,F]=r.useState({}),[S,L]=r.useState([]),[c,l]=r.useState(v),[P,b]=r.useState(0);r.useEffect(()=>{const e=t=>{t.target.classList.contains("filterthis")&&(y(!0),F({name:t.target.getAttribute("data-name"),data_type:t.target.getAttribute("data-type")}))};return window.addEventListener("click",e),()=>{window.removeEventListener("click",e)}},[]);const A=e=>{o.some(a=>a.name===e.name&&a.search_key.toLowerCase()===e.search_key.toLowerCase())||w([...o,{...e,id:o.length+1}]),l(1)},x=e=>{w(t=>t.filter(a=>a.id!==e)),l(1)},J=(e,t)=>t.length===0?e:e.filter(a=>t.every(s=>{switch(s.operator){case 2:return a[s.name]==s.search_key;case 4:return a[s.name]>s.search_key;case 5:return a[s.name]<s.search_key;case 1:return s.data_type==="text"?a[s.name].toLowerCase().includes(s.search_key.toLowerCase()):a[s.name].includes(s.search_key);default:return e}})),p=(e,t)=>{const a=J(e,t);return b(Math.ceil(a.length/u)),a.slice((c-1)*u,c*u)};r.useEffect(()=>{const e=p(h,o);L(e),localStorage.setItem(g,JSON.stringify({oldFilter:o,oldPage:c}))},[c,o,h]);const N=e=>{l(e)};let d={};return S.forEach(e=>{for(let t in e)t!=="wilayah"&&t!=="bulan"&&(d[t]=(parseInt(d[t])||0)+parseInt(e[t]??0))}),{showFilter:C,setShowFilter:y,filter:o,whenFilterrAdding:A,addFilter:E,setAddFilter:F,removeFilter:x,returnedData:S,totalPages:P,currentPage:c,displayData:p,handlePageChange:N,setCurrentPage:l,totals:d}}export{j as u};
